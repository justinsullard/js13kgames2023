(()=>{let now=0,$AC=500,$9D=144e3,D=0,$74=0,$15=0,$67=0,measure=0,beat=0,bar=0,step=0,$4C=!0,$38=1,$3C=32;const{cos,sin,min,max,sqrt,floor,ceil,round,imul,abs,PI,sign}=Math,$1D=(t=0,E=t=>t)=>new Array(t).fill(0).map((t,E)=>E).map(E),$32=([t,E],e)=>[t*cos(e)-E*sin(e),t*sin(e)+E*cos(e)],$58=([t,E,e],[T,s,n])=>[t+T,E+s,e+n],$98=([t,E,e],[T,s,n])=>[t-T,E-s,e-n],$82=(t,E=1e3)=>round(t*E)/E,$53=(t,E)=>t<E?t/E:1,$43=(t,E)=>max(0,$53(t,E)),$6F=(t,E,e)=>E<t&&t<e,$25=(t,E=(t,E)=>t-E)=>t.sort(E),$54=([t,E],e=1)=>{e/=$65([t,E])||1;return[t*e,E*e]},$65=([t,E],[e=0,T=0]=[])=>sqrt((e-t)**2+(T-E)**2),$1=t=>(0<t?floor:ceil)(t),$2=t=>(t<0?floor:ceil)(t),$0=t=>sign(t)*round(abs(t)),$A4=2*PI,$45=$1D(128,t=>t?$A4/t:0),$3D=(...t)=>Object.assign(...t),$91=(t,E)=>t.forEach?.(E),$5F=(t,E)=>t.map(E),$2C=(t,E)=>t.y-E.y||t.z-E.z||t.x-E.x,$86=t=>1+2.70158*(t-1)**3+1.70158*(t-1)**2,$8D=t=>t*t*(2.70158*t-1.70158),$8B=t=>1-cos(t*PI/2),$8C=t=>-(cos(PI*t)-1)/2,$8E=t=>sin(t*PI),$85=t=>sin(t*$A4),$90=2.5949095,$8F=$A4/4.5,$28=()=>min(500/$9D,.05),$34=t=>{let E=max(0,sin(t*$A4)),e=$28();return e<t&&t<=2*e?E+=2*$86((t-e)/e):2*e<t&&t<.5?E+=2:.5<=t&&t<.5+e&&(E+=2-2*$8D((t-.5)/e)),E/3},$27=t=>2*$8C($53(t,.5))-1,_WALK=t=>[(min(2*t,0)-(1-cos(t*$A4)))/2,-$8B(-min(sin(t*$A4),0))/2],$9=t=>_WALK(t),$39=(t=0)=>{let T=0|t;return let=fn=()=>{var t=(T=T+2654435769|0)^T>>>16,t=imul(t,569420461);return t^=t>>>15,(((t=imul(t,1935289751))^t>>15)>>>0)/4294967296*2},$3D(fn,{$2B:t=>void 0!==t?T=0|t:T,$6D:(t=1)=>round(fn()*t),$AF:()=>1-2*fn(),sign:()=>$2(fn.$AF()),bit:()=>round(fn()),bool:()=>!!round(fn()),$29:t=>t.slice().sort(fn.$AF),$47:t=>t[$1(fn()*t.length)],$73:(t,E,e,T,s,n)=>`hwb(${round(t+fn.$AF()*E)} ${round(e+fn.$AF()*T)}% ${round(s+fn.$AF()*n)}%)`,$4:(t,E,e=1)=>[t+fn.$AF()*e,E+fn.$AF()*e],$95:(t,E)=>{var e=T;return T=0|(t??T),E(),T=e,t??e}})},$19=new Map,$1A=t=>($19.has(t)||$19.set(t,new Set),$19.get(t)),$50=(t,E)=>$1A(t).add(E),$52=(t,E)=>$1A(t).delete(E),$8A=(t,...E)=>$91([...$1A(t)],t=>t(...E)),$4F=(E,e)=>{let T=(...t)=>{$52(E,T),e(...t)};$50(E,T)};let $96=0;const Q=[32.7,36.71,41.2,43.65,49,55,61.74,65.41,73.42,87.31,98,110,130.81,174.61,196].map(t=>2*t),$13=32/27,$26=(t=0,E=0,e=16)=>{let T=t?e/t:0;return $25($1D(t,t=>floor(t*T+E+e)%e))},$23=()=>{let e=Q.slice(1,-1);return[[Q[0],.4,0,[0,3,8,11,14]],...$1D(13,t=>{let E=rand.$47(e);return e=e.filter(t=>t!==E),[E,.2*rand(),rand.$AF(),$26(1+rand.$6D(),rand.$6D(15))]})]},$5E=()=>[Q[0],...rand.$29(Q.slice(1,9))].slice(0,8).map(t=>2*t),$B6=(t,e,E,T,s,n=6)=>{const A=t.createOscillator();var i=t.createGain(),r=t.createStereoPanner();A.frequency.setValueAtTime(E/$13,s),$91($26(n,2),(t,E)=>A.frequency.exponentialRampToValueAtTime(E%2?e*$13:e/$13,s+E/8)),i.gain.setValueAtTime(.1*E,s),i.gain.exponentialRampToValueAtTime(.5*E,s),i.gain.exponentialRampToValueAtTime(E,s+.325),i.gain.exponentialRampToValueAtTime(.01,s+2),r.pan.setValueAtTime(T,s),r.pan.exponentialRampToValueAtTime(-T,s+2),A.connect(i),i.connect(r),r.connect(t.destination),A.start(s),A.stop(s+2)},$B0=(t,E,e,T,s,n,A)=>{var i=t.createOscillator(),r=t.createGain(),R=t.createStereoPanner(),a=t.createDynamicsCompressor(),n=n||e;i.frequency.setValueAtTime(E,s),i.frequency.exponentialRampToValueAtTime(E/1.5,s+.5),r.gain.setValueAtTime(.1,s),r.gain.exponentialRampToValueAtTime(n,s+1/32),r.gain.exponentialRampToValueAtTime(n/5,s+.1/16),r.gain.linearRampToValueAtTime(0,s+.5),R.pan.setValueAtTime(A??T,s),a.threshold.setValueAtTime(-50,s),a.knee.setValueAtTime(40,s),a.ratio.setValueAtTime(12,s),a.attack.setValueAtTime(0,s),a.release.setValueAtTime(.25,s),i.connect(r),r.connect(R),R.connect(a),a.connect(t.destination),i.start(s),i.stop(s+.51)},$37=(t,E,e=0,T)=>{var s=.05+.03*rand(),n=1/8+rand()/16,A=t.createOscillator(),i=t.createGain(),r=t.createStereoPanner();A.type="triangle",A.frequency.setValueAtTime(E,T),i.gain.setValueAtTime(s/2,T),i.gain.exponentialRampToValueAtTime(s,T+n/2),i.gain.exponentialRampToValueAtTime(.01,T+n),r.pan.setValueAtTime(e,T),A.connect(i),i.connect(r),r.connect(t.destination),A.start(T),A.stop(T+n)},$24=()=>{let n=new AudioContext,t=-$82(D/4e3,10)%1,A=t,e=[0],i=[],T=[];var E=(t,E)=>{i=t||$23(),T=E||$5E()},s=()=>{n.currentTime+.25<A||A<0||($B6(n,T[0]||2*Q[rand.$6D(6)],.3,.5*rand.$AF(),A,floor(A-t)%3+4),T.push(T.shift()),$91(e,t=>{const[E,e,T,s]=i[t];$91(s,t=>$B0(n,E,e,T,.25*t+A))}),A+=4)};return setInterval(s,100),$50("rattle",(t=0)=>{$37(n,T[7-(beat+measure%8)%8]||Q[0],"number"==typeof t?t:0,n.currentTime)}),$50("beat",()=>{var[,t,E,,]=i[0];$B0(n,Q[14],t,E,n.currentTime)}),$50("aah",()=>{console.log("Playing $B6"),$B6(n,2*(T[7-(beat+measure%8)%8]||Q[0]),.3,.5*rand.$AF(),n.currentTime,6)}),$50("pause",()=>{"running"===n.state&&$4C?n.suspend():"suspended"!==n.state||$4C||n.resume()}),E(),s(),{fresh:E,n:A,get track(){return i},get voices(){return e},get melody(){return T},sing:(t=[],E)=>{e=[0,...t],T=E||T}}},$4D=($2D=({$8:t=window.innerWidth,$75:E=window.innerHeight,os:T=!1}={})=>{let s=T?null:document.createElement("canvas"),n=(s&&(s.width=t,s.height=E),T?new OffscreenCanvas(t,E):s.transferControlToOffscreen()),i=n.getContext("2d");n.width=t,n.height=E;const r={get $C(){return n.width},get $B(){return n.width/2},get $A(){return n.width/3},get $78(){return n.height},$77:n.height/2,get $76(){return n.height/3},get $3B(){return min(r.$76,r.$A)},get Rm(){return min(r.$78,r.$C)},get $33(){return max(r.$78,r.$C)},$A0:n,$36:s,ctx:i,$35:(t,E)=>{var e;T||(e=document.createElement("canvas"),s.replaceWith(e),(s=e).width=t,e.height=E,n=s.transferControlToOffscreen(),i=n.getContext("2d"),$3D(r,{$A0:n,ctx:i,$36:s})),n.width=t,n.height=E,r.$77=n.height/2},$95:t=>(i.save(),t(r),i.restore(),r),E:()=>(i.clearRect(0,0,r.$C,r.$78),r),center:()=>(r.T(r.$B,r.$77),r),$7E:(t="none")=>(i.filter=t,r),T:(t,E)=>(i.translate(t,E),r),R:(t,E)=>(i.rotate(t,E),r),$31:(...t)=>(i.roundRect(...t),r),M:(...t)=>(i.moveTo(...t),r),L:(...t)=>(i.lineTo(...t),r),A:(t=0,E=0,e=1,T=0,s=$45[1],n=!1)=>(i.arc(t,E,e,T,s,n),r),B:(...t)=>(i.bezierCurveTo(...t),r),P:t=>(i.beginPath(),t?.match(/[MLABCTREOSFW](?:\s*-?\d+(?:\.\d+)?|\s*#[a-f0-9]{3,8}|\s*hwb\([^)]+?\))*/g).forEach(t=>{var[t,...E]=t.includes("(")?[t[0],t.slice(1).trim()]:t.split(" ");r[t](...$5F(E,t=>"#"===t[0]||t.includes("(")?t:parseFloat(t,10)))}),r),C:()=>(i.closePath(),r),O:t=>(i.globalAlpha=t,r),S:(t=1,E=1)=>(i.scale(t,E),r),$79:(e,T)=>$91(T,(t,E)=>e.addColorStop(E/T.length,t)),$7C:(t,E,e,T,s)=>{t=i.createLinearGradient(t,E,e,T);return r.$79(t,s),t},$7B:(t,E,e,T,s,n,A)=>{t=i.createRadialGradient(t,E,e,T,s,n);return r.$79(t,A),t},F:t=>(i.fillStyle=t,i.fill(),r),$7F:(t,E)=>(i.fillStyle=t,i.fill(E),r),W:(t,E)=>(i.strokeStyle=t,i.lineWidth=E,i.stroke(),r),$5:(t,E,e)=>(i.strokeStyle=t,i.lineWidth=E,i.stroke(e),r),$70:(...t)=>(i.drawImage(...t),r)};return r.E(),r},()=>{const A=new Path2D;return A.M=(...t)=>(A.moveTo(...t),A),A.L=(...t)=>(A.lineTo(...t),A),A.A=(t=0,E=0,e=1,T=0,s=$45[1],n=!1)=>(A.arc(t,E,e,T,s,n),A),A.$B1=(...t)=>(A.arcTo(...t),A),A.B=(...t)=>(A.bezierCurveTo(...t),A),A.Q=(...t)=>(A.quadraticBezierCurveTo(...t),A),A.C=()=>(A.closePath(),A),A}),$11=(t,E)=>$2D({$8:t,$75:E||t,os:!0}),$18=(t=32,E="#840")=>{const e=$11(3*t),T=t/4,s=1.4*t;return e.$95(()=>{e.E().center().P().A(0,0,t).C().F(E).P().M(-s,-T).L(s,-T).M(-s,T).L(s,T).M(-T,-s).L(-T,s).M(T,-s).L(T,s).W(E,3)}),{R:1.5*t,D:3*t,get $70(){return e.$A0}}},$60=(Array.$9A=()=>[],(a,d,m={},p="$88")=>{const dd=window[p].$9A?.()??[],o=dd.length,dv=$5F(d,([,t])=>"function"==typeof t?t.toString().replace(/^\(\) ?=> ?/,""):JSON.stringify(t)).join(","),e=`window.${a}=class ${a} extends ${p}{`+`static $9A=()=>[...${p}.$9A(),${dv}];`+`constructor(...x){super(...(x.length ? x : ${a}.$9A()))}`+"*[Symbol.iterator]() {for(let i = 0,l=this.length;i<l;i++){yield this[i]}}"+$5F(d,([t],E)=>`  get ${t}(){return this[${E+o}]} set ${t}(x){return this[${E+o}]=x}`).join("")+$5F(Object.values(m),t=>t.toString()).join("")+"};";return eval(e)}),$3=$1D(1280,t=>4/((t+1)/10)*5).reduce((t,E,e)=>t.set((e+1)/10,E),new Map),$71=($60("$88",[["x",0],["y",0],["z",0],["age",0],["$B3",[]],["$2B",null]],{$A1(){return new this.constructor(...this)},$58(t){return[this.x,this.y,this.z]=$58(this,t),this},$32(t){return[this.x,this.y]=$32(this,t),this},$98(t){return new $88(...$98(this,t))},$41(){return $5F([this.x,this.y,this.z],round)},$54(t=1){return[this.x,this.y]=$54([this.x,this.y],t),this},$2F(t=1){return this.$54(this.$65()*t),this},$65(){return $65([this.x,this.y])},$40(t){var[E,e,T]=this.$49();return t.S(T,T),t.T(E,e),this},$49(){var[t,E,e]=this.$98($AB),T=E<0?4/-E*5:0;return[t*=4,E=4*e*T,T]},$3F(t=1){var[E,e,T]=this.$49(),s=(E*=T*$3C,e*=T*$3C,t?2*-$3C*T:0);return new $88(E+$F.$B,e+$F.$77+s,2*T*(t?$3C:1))},$A3(){var[t,E,e]=this.$3F();return $4D().A(t,E,abs(e)).C()},$E(t){},$14(){},$94(){},$A6(){},$6C(){}},"Array"),$60("$93",[["$72",null],["$51",[]],["$95",()=>{}]]),$60("$16",[["$15",0],["$A5",{}],["$17",null],["$20",null],["$1E",null],["$E",()=>{}]],{},"Array"),{w:0,a:0,s:0,d:0}),$2A=($60("$B5",[["shell",null],["$22",0],["$57",0],["$97",1],["$4E",1],["$5C",()=>new $88],["$6E",()=>new $88],["$10",()=>new $88(1,1,0)],["$2E",[]],["w",0],["a",0],["s",0],["d",0],["$21",2],["$6A",[]],["$92",[]],["$66",0],["$3E",[0,0,0]]],{$89(){return this.$22?abs(this.$22):0},$1F(){var t=this.$57%1;return t*=this.$5C.$65?.()||$6F(t,1/32,31/32)?1:0,(this.$97<0?1-t:t)%1},$9F(){return this.$1F()?$53(this.$1F()%.5,.5)%1:1-bar%.5*2%1},$E(t){t/=1e3;this.$1F(),this.$89();let{w:E,a:e,s:T,d:s}=this;var n=round(this.x)+128,A=round(this.y)+128,i=this.$2E.filter(t=>t.$15<=$15),i=(i.length?($91(i,t=>{var E,e;t.$20=t.$20||t.$15,t.$17?($65(this,t.$17),.5<t.$17.$A1().$2F(-1).$58(this).$65()?(t.$15=$15,E=abs(this.x-t.$17.x),e=abs(this.y-t.$17.y),E=$53(E,1)>3/8?1:0,e=$53(e,1)>3/8?1:0,$3D(t.$A5,this.x>t.$17.x?{a:E,d:0}:{a:0,d:E},this.y>t.$17.y?{w:e,s:0}:{w:0,s:e})):(t.$1E=t.$15,this.$2E.push(new $16($15+1,$71,null),new $16($15+12,$71,null)))):(t.$15=-1,t.$1E=$15),$3D(this,t.$A5)}),i.length&&({w:E,a:e,s:T,d:s}=this),this.$2E=this.$2E.filter(t=>!t.$1E||t.$1E>$15)):$3D(this,{w:0,a:0,s:0,d:0}),this.$6E=new $88(-e+s,-E+T,0),this.$97=sign(this.$6E.x||this.$97),this.$4E=sign(this.$6E.y||this.$4E),new $88(...this.$6E)),r=new $88(...this.$5C),R=this.$9F();if(0===i.$65()&&$6F(r.$65(),1/16,R)&&i.$58(new $88(...this.$10).$54((1-R)/2)),i.$54(4*t),this.$6E.$65()){const T=.75+$53(i.$A1().$54(2).$58(r.$A1().$54(1)).$65(),3)/4;r.$2F(T)}r.$58(i),r.$54(min(r.$65(),this.$21));var a,i=(this.$5C=r).$65(),h=new $88(...r);h.$54(h.$65()*t);const I=$58(this,h);this.$B3.length&&!this.$B3.find(t=>$65($98(t,I))<t.$3A)&&h.$2F(-.5);let O=round(this.x+h.x)+128,S=round(this.y+h.y)+128;if(n===O&&A===S||((a=world.$7A[S][O])&&a!==this&&(h.$2F(-.5),O=round(this.x+h.x)+128,S=round(this.y+h.y)+128),world.$7A[A][n]=null,world.$7A[S][O]=this),this.$58(h),this.$57+=h.$65(),this.$22=i*this.$97,this.$10=i?r.$A1().$54(1):this.$10,this.$6E.$65()<.25&&r.$65()&&r.$2F(this.$9F()<1/8?0:$43(1-2*t,1)),0===r.$65()&&this.$1F()&&R&&(r.$2F(0),this.$57=round(2*this.$57)/2),this===$44){const T=floor(this.$57/.25);T>this.$66&&$8A("rattle",this.$10.x/-2),this.$66=T}this.$3E=this.$3F()},$14(){var t;this.$2E?.length||(t=this.$B3[0],this.$2E=[new $16($15,{},t.$A1().$58(new $88(0,2+rand.$6D(t.$3A-2),0).$32(rand()*$A4)))])}},"$88"),({$99:E=512,$92:s=[]}={})=>{const n=$11(E),T=E/2,A=E/12,e={R:T,$99:E,$92:s,$94:(t=n)=>(t.$95(()=>{let e=5.6*A;t===n&&t.E().center(),t.P().A(0,0,T).C().F(t.$7B(0,2*A,4*A,0,0,E,["#242","#262"])),n.P().A(0,0,e),$1D(28,t=>{var[t,E]=$32([1,0],$45[28]*(t-.5)-$45[4]);n.M(t*e,E*e).L(t*T,E*T)}),n.W(n.$7B(0,2*A,3*A,0,0,E,["#3536","#4846"]),2),$1D(13,t=>{let E=0,e=(t-11)*A*2.25;var T;t<10&&(T=$45[10]*(t-2),[E,e]=$32([4.5*A,0],T)),n.P().A(E,e,A).C().F("rgba(127,127,127,0.25)"),s[t]&&n.P().A(E,e,A).C().F("#aa9")})}),e),add(t){return s.push(t),e.$94(),e},get $70(){return n.$A0}};return e.$94(),e}),$4A=new Map,$F=($60("$4B",[["$A2",()=>`hwb(${round(30+10*rand.$AF()-2)} ${round(0+10*rand())}% ${round(47+10*rand())}%)`],["$1B",()=>`hwb(${round(30+2*rand.$AF()-2)} 0% ${round(67+4*rand())}%)`]],{$4D(t,E,e,T,s){var n,A,i,r,R,a,[t,E,e,T,s]=[$82(t,4),$82(E,64),e,T,$82(s[0],4)],T=[t,E,e,T,s].join();return $4A.has(T)||(n=$85(E)/8,A=t?t/8:$85(E)/16,i=$8E(E)/8,abs(t/16),[E,r]=[t?$9(E):[0,0],t?$9(1-E):[0,0]],[[E,r],[R,a]]=[E,r],s=sqrt(abs(s)/(abs(t)||1)),$4A.set(T,$4D().A(0+A*s,i-3,1,$A4[4],$A4).M(0+A*s,i-2).L(2+R/3,n*e-1.5).L(1+E/16,n*e-1).L(1+E*s,r).L(0,i-1).L(-1-R*s,a).L(R/16-1,-1-n*e).L(-2-E/3,-1.5-n*e).C())),$4A.get(T)},$94(A,i=bar%.5*2,r=!0){A.$95(()=>{r&&this.$40(A);var t=this.$1F()%.5,t=t?$53(t%.5,.5):1-i,E=this["$22"];let e=E?E/8:$85(t)/16,T=$8E(t)/8,s=abs(E/16);const n=sqrt(abs(this.$5C[0])/(abs(E)||1));this.shell&&0<this.$4E&&A.P().A(0-e*n/2,-1.75-T/2+s,7/8).C().W("#242",1/16).F("#131");E=this.$4D(this.$22,t,this.$97,this.$4E,this.$5C);A.$5(this.$1B,1/8,E).$7F(this.$A2,E),this.shell&&(this.$4E<0||$4C)&&A.$95(()=>{A.P().A(0-e*n/2,-1.75-T/2+s,7/8).C(),A.W("#242",1/16),A.T(0-e*n/2,-1.75-T/2+s),A.R(this.$5C[0]/16),A.$70(shell.$70,-1,-1,2,2)})})}},"$B5"),$60("$9B",[],{$94(n){n.$95(()=>{this.$40(n),n.S(this.$97,1);var t=this.$22,[E,e]=t?$9(this.$9F()):[0,0],[T,s]=t?$9(1-this.$9F()):[0,0],[[T,s],[E,e]]=0<this.$97?[[E,e],[T,s]]:[[T,s],[E,e]],t=sqrt(abs(this.$5C[0])/(abs(t)||1));n.P().M(1,s/4-2).L(0-E*t,0+e).L(0,s/4-1).C().M(-1,e/4-1).L(T*t-1,0+s).L(-2,e/4-1.5).C().F("#520"),n.P().M(1,s/4-3).L(2,s/4-2).L(1,s/4-2).L(1+T*t,0+s).L(0,s/4-1).L(-1,e/4-1).L(-2-E*t,0+e).L(-2,e/4-1.5).L(-1.75,e/4-1.75).L(-2,e/4-2).L(0,s/4-2).L(.5,s/4-2.5).L(0,s/4-3).C().W("#620",1/8).F("#840"),n.P().A(1,s/4-4,1,$45[2],1,!0).W("#620",.125)})}},"$B5"),$60("$AE",[],{$94(n,t,E,e){n.$95(()=>{this.$40(n),n.S(this.$97,1);var t=this.$22,[E,e]=t?$9(this.$9F()):[0,0],[T,s]=t?$9(1-this.$9F()):[0,0],[[T,s],[E,e]]=0<this.$97?[[E,e],[T,s]]:[[T,s],[E,e]],t=sqrt(abs(this.$5C[0])/(abs(t)||1));n.P().M(1,s/4-2).L(0-E*t,0+e).L(0,s/4-1).C().M(-1,e/4-1).L(T*t-1,0+s).L(-2,e/4-1.5).C().F("#520"),n.P().M(2,s/4-2).L(2,s/4-1).L(1.5,s/4-.5).L(1,s/4-1).L(1+T*t,0+s).L(0,s/4-1).L(-1,e/4-1).L(-2-E*t,0+e).L(-2,e/4-1.5).L(-1.75,e/4-1.75).L(-2,e/4-2).L(0,s/4-3).L(1,s/4-2.25).L(1.5,s/4-2.5).C().stroke("#620",1/8).F("#840"),n.P().A(2,s/4-2.25,.75,$45[2],$45[2]+$45[7]).stroke("#620",.125)})}},"$B5"),$60("$5B",[["$48",0],["$3A",32],["$A2","#ccf"],["$1B","#ccf4"]],{$94(A){A.$95(()=>{var t,E,{$48:e,$3A:T}=this,s=T-1,n=1.3*T;e&&(t=$1(cos($45[28]*e)*n),E=e<14?t:-n,e=14<e?-t:n,A.P().M(0,s).B(e,T,e,-T,0,-s).B(E,-T,E,T,0,s).C().F(this.$A2)),A.P().A(0,0,s).C().W(this.$1B,T/16)})},$64(){return abs(sin($45[2]*this.$48/28))}},"$88"),$60("$B3",[["$A2",()=>`hwb(${120+rand.$6D(25)} ${10+rand.$6D(5)}% ${round(65+rand.$6D(5))}%)`],["$3A",16],["$42",[]],["$87",[]],["$68",[]],["$D",0],["$9C",null]],{$7D(E=16){this.$3A=E;rand();return this.$42=$1D(16,t=>new $88(0,-E,0).$32($45[16]*(t+rand()/4))),this},$E(E){var t=this.$3A+1,[e]=new $88(-t,-t,0).$58(this).$3F(),[t]=new $88(t,-t,0).$58(this).$3F();this.$D=t<=0||e>=$F.$C?0:1,$91(this.$68,t=>t.$E(E))},$94(i){if(this.$D)return i.$95(()=>{let A=0,t=new $88;var E=$5F(this.$42,(e,T)=>{t.splice(0,t.length,...e);var[e,s,n]=t.$58(this).$49();if(n){A=max(A,n);let t=e*n,E=s*n;return()=>(T?i.L:i.M)(t,E)}return()=>{}});i.P(),$91(E,t=>t()),i.C().O(.25).F(this.$A2).W(this.$A2,2/32),i.P(`M ${$82(l)} ${$82(u)} L ${$82(r)} ${$82(u)} W #0f0 4`)}),i.$A0}},"$88"),$60("$7",[["$F",null]],{$94(t){return this.$F||(this.$F=$2D({$8:64,$75:64}).P().M(...rand.$4(1,28)).L(...rand.$4(24,24)).L(...rand.$4(21,12)).L(...rand.$4(31,11)).L(...rand.$4(33,23)).L(...rand.$4(47,14)).L(...rand.$4(53,21)).L(...rand.$4(61,31)).L(...rand.$4(52,44)).L(...rand.$4(42,47)).L(...rand.$4(43,43)).L(...rand.$4(39,48)).L(...rand.$4(16,57)).L(...rand.$4(9,54)).L(...rand.$4(3,42)).C().F(rand.$73(15,2,17,2,68,4))),t.$70(this.$F.$A0,0,0,64,64),t}},"$88"),$60("$46",[["$4D",""],["$F",null],["$8",0],["$75",0],["$55",0],["$A2",()=>rand.$73(150,2,10,6,80,4)]],{$7D(t){return this.$2B=rand.$95(this.$2B,()=>{const n=min(8,this.$B4=t||this.$B4||4*rand()+3),A=ceil(n);let i=0,r=0,R=0;this.$4D=$1D(A,t=>{var E=(n-t)/(n-t+3),e=i-E/.125,T=E*(A-t),s=i+E+.5,t=$53(n-t,A),E=$82(rand.$AF()*t*E/2),T=(r=max(T,r),`M ${E} ${$82(e)} L ${$82(-T)} ${$82(s)-rand()*t} L ${$82(R)} ${$82(i+.25)} L ${$82(T)} ${$82(s)-rand()*t} L ${E} `+$82(e));return R=E,i=e,T}).join(" ")+` F ${this.$A2} S #1218`,this.$8=ceil(2*r),this.$75=ceil(abs(i)),this.$F=$2D({$8:this.$8*$3C*4,$75:this.$75*$3C*4,os:!0}),this.$F.$95(t=>t.S($3C,$3C).T(this.$8/2,this.$75).P(this.$4D))}),this},$94(t){if(this.$F)return t.$95(()=>{this.$40(t),t.$70(this.$F.$A0,-this.$8/2,-this.$75,4*this.$8,4*this.$75)}),this},$E(t){this.$55=this.$55||4+rand.$6D(284),$15>=this.$55&&(this.$7D(this.$B4+(rand()+1)/8),this.$55=$15+576)},$A6(t){return 2<this.$B4&&this.$98(t).$65()<=4},$6C(t){console.log("$46 $6C");var E=$3D(new $7);t.$6A.push(E),this.$7D(--this.$B4),$8A("beat")}},"$88"),$60("$80",[["$F",null],["$48",0],["$A2",()=>rand.$73(180,4,33,3,55,4)],["$67",-1],["$8",4],["$75",4],["$AD",!1]],{$7D(){const e=this.$AD,T=(this.$F=this.$F??$11(this.$8*$3C*4,this.$75*$3C*4),rand.$AF()/4);var t=e?-2:-1.5;const s=rand()/8,n=t+s;return this.$F.$95(t=>{var E;t.E().S($3C,$3C).T(this.$8/2,this.$75).P().M(-1.5-T,0).B(-2.5,-3,-1,-3,T,s-2).B(1,-3,2.5,-3,1.5+T,0).C().F(this.$A2).P().M(0,0).B(2*-T,-s,4*T,n,T,n).W("#0002",1/8),t.P().A(T,n,e?.75:1/8).F(`hwb(${round((180/28*this.$48+240+rand.$AF()/4)%360)} ${round(10+25*rand())}% 5%)`),this.$AD&&(E=$3D(new $5B,{$3A:10,$48:this.$48,$A2:"#ccf",$1B:"#000a"}),t.O(.5).T(1.25*T,n).S(1/16,1/16),E.$94(t))}),this},$94(t,E){if(this.$F)return E?t.$70(this.$F.$A0,0,0,256,256):t.$95(()=>{this.$40(t),t.$70(this.$F.$A0,-this.$8/2,-this.$75,4*this.$8,4*this.$75)}),t},$E(t,E,e){var E=E??moon?.$48,e=e??$74;return E!==this.$67&&.5<=e&&(e=((this.$67=E)+28-this.$48)%28<3,this.$AD=e,this.$7D()),this},$A6(t){return this.$AD&&this.$98(t).$65()<=2},$6C(t){console.log("$80 $6C");var E=$3D(this.$A1(),{$F:null});t.$6A.push(E.$7D()),this.$AD=!1,this.$7D(),$8A("aah")}},"$88"),$60("$83",[],{},"$88"),$60("$6",[["$2B",13],["$B4",0],["$5A",[]],["$92",[]],["$84",[]],["$7A",()=>$1D(256,t=>$1D(256,t=>null))],["$B2",[]],["$5F",null],["$81",null],["$1C",[]],["$87",[]],["$68",[]],["$6B",[]]],{$7D(t){this.$5F=this.$5F||$2D({$8:256,$75:256,os:!0}),this.$81=this.$81||$2D({$8:256,$75:256,os:!0}),this.$2B=t,rand.$2B(t);this.$5A=$1D(28,t=>(new $B3).$7D(12).$58([96,0,0]).$32(t*$45[28]-$45[4])),this.$92=$1D(13,t=>t<10?(new $B3).$7D(18).$58([80,0,0]).$32($45[10]*(t+2.5)):(new $B3).$7D(18).$58([0,16*(t-11)*2.5,0])),this.$B2=[...this.$5A,...this.$92],$91(this.$5A,(e,t)=>{e.$56="moon "+t,$91(e.$42,E=>{var t;this.$B2.filter(t=>E.$A1().$58(e).$98(t).$65()<=t.$3A+.05).length<2&&((t=(new $46).$7D().$58(e).$58(E)).$B3.push(e),e.$68.push(t),this.$68.push(t))});t=$3D(new $80,{x:e.x,y:e.y,$48:t}).$E(0,0,.5);e.$68.push(t),this.$68.push(t)}),$91(this.$92,(E,t)=>{$1D(3,t=>{t=(new $4B).$58(E.$A1().$58(new $88(0,6+rand.$6D(6),0).$32($45[3]*(t+rand.$AF()/8))));E.$87.push(t),t.$B3.push(E)})}),this.$87.push(...$5F(this.$B2,t=>t.$87).flat().sort($2C)),this.$5F.$95(T=>{T.E().center(),$91(this.$B2,e=>{T.P(),$91(e.$42,(t,E)=>(E?T.L:T.M)(t[0]+e.x,t[1]+e.y)),T.C().F(T.$7B(0,90,90,0,0,256,["#242","#262"])).O(.25).W(T.$7B(0,184,276,0,0,256,["#353","#484"]),1).O(1)})}),this.$81.P().A(128,128,108).W("#202",16).C().P().A(128,112,48).F(this.$81.$7B(128,128,32,128,128,256,["hwb(250deg 14% 57%)","hwb(220deg 65% 12%)"])),this.$81.$70(this.$5F.$A0,0,0,256,256);const e=$3D(new $5B,{$3A:10});return $91(this.$5A,(E,t)=>{$3D(e,{$48:t}),this.$81.$95(t=>{t.T(128+E.x,128+E.y).O(.875).P().A(0,0,E.$3A).F(E.$A2).O(.125),e.$94(t)})}),this.$81.$95(t=>{t.center(),$91(this.$68.filter(t=>!(t instanceof $80)),t=>this.$81.P().A(t.x,t.y+.5,1.25).F(t.$A2))}),$91([...this.$87,...this.$68,$44],t=>{t.y=$0(t.y),t.x=$0(t.x),this.$7A[t.y+128][t.x+128]=t}),this},$30(){},$62(){},$E(E){return $44.$B3=this.$B2.filter(t=>$65($98(t,$44))<t.$3A),$91(this.$B2,t=>t.$E(E)),this},$94(E){this.$6B.length=0;var e=-E.$B/$3C,T=E.$C/$3C;for(let t=0;t<=256&&!(t>$AB.y+132);t+=1){var s=new $88($AB.x,t-128,0).$3F(0),n=s[2];if(0===n)break;var A=n*$3C*2,i=max(0,floor($AB.x+128-E.$B/A)-4);min(256-i,ceil(E.$C/A)+8);E.$70(this.$81.$A0,$AB.x+128-E.$B/A,t,E.$C/A,1,e,(s[1]-E.$77)/$3C,T,2*n),$91($25(this.$7A[t].filter(t=>t),$2C),t=>{t.$94(E),t.$A6?.($44)&&this.$6B.unshift(t)})}return E.$A0}},"$88"),$2D());let moon=new $5B,sun=$18(32,"#ffd"),rand=$39(13),stars=$1D(91,()=>[rand.$AF(),rand.$AF()]),shell=$2A(),$44=$3D(new $4B,{x:0,y:104,z:0,shell:shell,$4E:-1,$A2:"#840",$1B:"#620"}),$59=new $88,world=($59.$4D=$4D().M(-2,-2).L(2,2).L(-2,2).L(2,-2).C(),(new $6).$7D(13)),entities=[],$AA=20,$A8=-2,$A9=4,$A7=-1/8,$AB=new $88($44.x,$44.y+$A9,$44.z+$A7);const $12=E=>{$4C||(D+=E*$38,$9E=floor(D/$9D),$74=D%$9D/$9D,measure=floor(D/4e3),bar=D%4e3/4e3,beat=floor(8*bar),$15=floor(D/250),$67!==$15&&$8A("tick"),$67=$15,step=D%$AC/$AC,$69.change&&$44.$2E.unshift($3D(new $16,{$15:$15,$A5:$69.$58})),$69.shift?$44.$21=4:$44.$21=2,world.$E(E),$44.$E(E),$91(world.$87,t=>t.$E?.(E))),$AB.x+=($44.x-$AB.x)/16,$AB.y+=($44.y+($4C?$A9:$AA)-$AB.y)/16,$AB.z+=($44.z-$AB.z+($4C?$A7:$A8))/16};let $5D=$1D(256,t=>[t,t]).flat().map(t=>t/$3C);const $61=(t=0)=>{performance.now();var E=t-now;now=t,$12(E*$38);const{$78:e,$77:i,$76:T,$C:s,$B:r,$A:n,$3B:R,$33:a}=$F;var t=$74,E=t;const h=(t+.5)%1;moon.$48=D?floor((28+(D-$28()*$9D)/$9D)%28):0;let I=$27(E)*n;const O=$34(E);let S=$27(h)*n;const P=$34(h);.5<t?I=-S:S=-I;let L;$F.$95(()=>{if($F.E(),$F.ctx.fillStyle=.1<O?"#840":"#202",$F.ctx.fillRect(0,0,s,e),$F.center(),.25<P){const A=T-P*T*2;$91(stars,([t,E])=>{var e=t*r,T=(E-h)*i,s=$53($65([S,A],[e,T]),4*moon.$3A),n=1+.5*sin((7.3*E+now%$9D/$9D+1.1*t)*$A4),E=(1+n)**2*max(0,sin(7.3*E+now/$9D*130+11*t)**3);$F.O(max(0,1-moon.$64()/2-(s<.25?1:1-s))).P().A(e,T,n).F("#ffd").C(),$F.P().M(e,T-E).L(e,T+E).M(e-E,T).L(e+E,T).W("#ffd",.5)}),L=`rgba(204,204,255,${$82(.1*moon.$64())})`,$F.O(max(0,P)).P().A(S,A,2*a).C().F($F.$7B(S,A,R*moon.$64(),S,A,2*R,[`rgba(204,204,255,${$82(.05+.2*moon.$64())})`,L,L,"rgba(24,0,24,0)"])).T(S,A),moon.$94($F),L="#ccf6"}.25<O&&($F.O(max(0,O)),L="#aae6",$F.P().A(I,T-O*T*2,2*a).C().F($F.$7B(I,T-O*T*2,sun.R*max(O,0),I,T-O*T*2,a,["#fff","#aae","#aaec","rgba(170,170,238,0)"])).$70(sun.$70,I-sun.R,T-O*T*2-sun.R,sun.D,sun.D))}),$F.$95(()=>{$F.T(r,i),$F.S($3C,$3C),world.$94($F)}),$F.$95(()=>$F.T($59.x-2,$59.y-2).S(4,4).R($A4*$85(now%4e3/4e3)).$7F("#2808",$59.$4D)),$59.$17=$4C?null:world.$6B.find(t=>$F.ctx.isPointInPath(t.$A3(),$59.x,$59.y)),$59.$17&&$F.$95(()=>{var t=$59.$17.$A3();$F.ctx.setLineDash([13,7]),$F.ctx.lineDashOffset=now/1e3*20,$F.$5("#280",1,t)});const A=$44.$6A.length;$91($44.$6A,(E,t)=>{const e=($F.$C-128)/(A+1)*(t+1)+64,T=$F.$78-128;$F.$95(t=>E.$94(t.T(e,T).P().$31(0,0,64,64,4).C().F("#fff4"),!0))}),$96||($F.ctx.fillStyle="#0f0",$F.ctx.font="32px monospace",E="Click to begin",$F.ctx.fillText(E,$F.$B-$F.ctx.measureText(E).width/2,$F.$76)),requestAnimationFrame($61)},$69=($61(0),{w:0,a:0,s:0,d:0,get change(){return this.w+this.a+this.s+this.d},get $58(){var{w:t,a:E,s:e,d:T}=this;return{w:t,a:E,s:e,d:T}}}),$63=($4F("mousedown",()=>{$4C=!1,$96=$24()}),$50("click",()=>$59.$17?.$6C($44)),$50("keydown",t=>{$8A("input");t=t.key.toLowerCase();$69[t]=1,$8A("key-"+t),"escape"===t&&($4C=!$4C,$8A("pause"))}),$50("keyup",t=>$69[t.key.toLowerCase()]=0),$50("mousedown",()=>$8A("input")),$50("mousemove",({clientX:t,clientY:E})=>$3D($59,{x:t,y:E})),$50("resize",()=>{$F.$35(window.innerWidth,window.innerHeight)}),$91(["visibilitychange","blur"],t=>$50(t,()=>{$4C=!0,$8A("pause"),$91(Object.keys($69),t=>$69[t]=0)})),(t,E,e)=>t.addEventListener(E,e));$91(["mousedown","mouseup","mousemove","click","keydown","keyup","visibilitychange"],E=>$63(document,E,(...t)=>$8A(E,...t))),$91(["resize","blur"],E=>$63(window,E,(...t)=>$8A(E,...t))),document.body.appendChild($F.$36);})()